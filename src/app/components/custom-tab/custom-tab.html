<div class="tabs-wrapper flex flex--column" ngTabs role="tablist-container">
  <!-- TAB HEADERS -->
  <div
    ngTabList
    class="tabs-header flex"
    role="tablist"
    [wrap]="tabsInLoop()"
    [(selectedTab)]="selectedTab"
    [orientation]="orientation()"
    [selectionMode]="selectionMode()"
    [softDisabled]="softDisabled()"
    [attr.aria-orientation]="orientation()"
    [attr.aria-wrap]="tabsInLoop()"
    [attr.aria-selection-mode]="selectionMode()"
  >
    <div class="tablist flex relative">
      @for (tab of resolvedTabs(); track tab.id) {
        <div
          ngTab
          [value]="tab.value"
          role="tablist-button"
          [disabled]="tab.disabled"
          [class.disabled]="tab.disabled"
          class="tablist__item flex items--center justify--center gap--sm"
          (click)="onSelectTab(tab)"
        >
        {{ tab.disabled ? '(Disabled) ' : '' }}
          @if (tabsTemplate(); as template) {
            <!-- @if(tab.icon) {
              <span class="icon"><i class="fa-solid fa-{{tab.icon}}"></i></span>
            } -->
            <ng-container *ngTemplateOutlet="template; context: { tab: tab }"></ng-container>
          } @else {
            <span class="tab-label pointer-events--none">{{ tab.label }}</span>
          }
        </div>
      }
    </div>
    <div class="bubble active"></div>
    <div class="bubble hover"></div>
  </div>

  <!-- TAB PANELS -->
  <div class="tab-panels">
    @for (tab of resolvedTabs(); track tab.id) {
      <div
        ngTabPanel
        [value]="tab.value"
        role="tabpanel"
        [preserveContent]="preserveContent()"
        class="tab-panel"
      >
        <ng-template ngTabContent>
          @if (tabsContentTemplate(); as template) {
            <ng-container *ngTemplateOutlet="template; context: { tab: tab }"></ng-container>
          } @else {
            @if (showDefaultContent()) {
              <div class="tab-default-content" role="tabpanel">{{ tab.label }} Content</div>
            }
          }
        </ng-template>
      </div>
    }
  </div>
</div>
